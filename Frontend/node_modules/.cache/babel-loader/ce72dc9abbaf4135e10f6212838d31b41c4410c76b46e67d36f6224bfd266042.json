{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4b3441ad\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"sort\"\n}, \"Trier par :\", -1 /* HOISTED */));\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"price_asc\"\n}, \"Prix croissant\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"price_desc\"\n}, \"Prix décroissant\", -1 /* HOISTED */));\nconst _hoisted_4 = [_hoisted_2, _hoisted_3];\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"category\"\n}, \"Filtrer par catégorie :\", -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"Toutes les catégories\", -1 /* HOISTED */));\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = [\"src\", \"alt\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createCommentVNode(\" Options de tri \"), _createElementVNode(\"div\", null, [_hoisted_1, _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.sortBy = $event),\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.fetchProducts && $options.fetchProducts(...args))\n  }, [..._hoisted_4], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.sortBy]])]), _createCommentVNode(\" Options de filtrage \"), _createElementVNode(\"div\", null, [_hoisted_5, _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.selectedCategory = $event),\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.fetchProducts && $options.fetchProducts(...args))\n  }, [_hoisted_6, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, category => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: category.id,\n      value: category.id\n    }, _toDisplayString(category.name), 9 /* TEXT, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.selectedCategory]])]), _createCommentVNode(\" Liste des produits \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredProducts, product => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: product.id,\n      class: \"product-card\"\n    }, [_createElementVNode(\"h2\", null, _toDisplayString(product.name), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(product.description), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(product.price) + \" €\", 1 /* TEXT */), _createCommentVNode(\" Afficher l'image du produit \"), product.imageUrl ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: product.imageUrl,\n      alt: product.name\n    }, null, 8 /* PROPS */, _hoisted_8)) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["_createElementVNode","for","value","_hoisted_2","_hoisted_3","_createElementBlock","_createCommentVNode","_hoisted_1","_cache","$event","$data","sortBy","onChange","args","$options","fetchProducts","_hoisted_4","_hoisted_5","selectedCategory","_hoisted_6","_Fragment","_renderList","categories","category","key","id","name","_hoisted_7","filteredProducts","product","class","_toDisplayString","description","price","imageUrl","src","alt","_hoisted_8"],"sources":["C:\\Users\\IKRAM\\Coding_Cha\\app_codingchan\\src\\components\\ProductList.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- Options de tri -->\n    <div>\n      <label for=\"sort\">Trier par :</label>\n      <select v-model=\"sortBy\" @change=\"fetchProducts\">\n        <option value=\"price_asc\">Prix croissant</option>\n        <option value=\"price_desc\">Prix décroissant</option>\n      </select>\n    </div>\n    \n    <!-- Options de filtrage -->\n    <div>\n      <label for=\"category\">Filtrer par catégorie :</label>\n      <select v-model=\"selectedCategory\" @change=\"fetchProducts\">\n        <option value=\"\">Toutes les catégories</option>\n        <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">{{ category.name }}</option>\n      </select>\n    </div>\n\n    <!-- Liste des produits -->\n    <div v-for=\"product in filteredProducts\" :key=\"product.id\" class=\"product-card\">\n      <h2>{{ product.name }}</h2>\n      <p>{{ product.description }}</p>\n      <p>{{ product.price }} €</p>\n      <!-- Afficher l'image du produit -->\n      <img v-if=\"product.imageUrl\" :src=\"product.imageUrl\" :alt=\"product.name\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      categories: [],\n      sortBy: 'price_asc',\n      selectedCategory: '',\n    };\n  },\n  mounted() {\n    this.fetchProducts();\n    this.fetchCategories();\n  },\n  methods: {\n    fetchProducts() {\n      let url = 'http://127.0.0.1:8000/api/products';\n      // Ajouter des paramètres pour filtrer par catégorie\n      if (this.selectedCategory !== '') {\n        url += '?category=' + this.selectedCategory;\n      }\n      axios.get(url)\n        .then(response => {\n          // Tri des produits en fonction de sortBy\n          if (this.sortBy === 'price_asc') {\n            this.products = response.data.sort((a, b) => a.price - b.price);\n          } else if (this.sortBy === 'price_desc') {\n            this.products = response.data.sort((a, b) => b.price - a.price);\n          } else {\n            this.products = response.data;\n          }\n          // Mettre à jour l'URL de l'image pour chaque produit\n          this.products.forEach(product => {\n            product.imageUrl = this.getProductImageUrl(product.image);\n          });\n        })\n        .catch(error => {\n          console.error('Erreur lors de la récupération des produits :', error);\n        });\n    },\n    fetchCategories() {\n      // Récupérer la liste des catégories depuis le serveur\n      axios.get('http://127.0.0.1:8000/api/categories')\n        .then(response => {\n          this.categories = response.data;\n        })\n        .catch(error => {\n          console.error('Erreur lors de la récupération des catégories :', error);\n        });\n    },\n    getProductImageUrl(imagePath) {\n      // Construire l'URL complet de l'image à partir du chemin d'accès\n      return 'http://127.0.0.1:8000/api/products/' + imagePath;\n    }\n  },\n  computed: {\n    filteredProducts() {\n      // Appliquer le filtre de catégorie localement\n      if (this.selectedCategory === '') {\n        return this.products;\n      } else {\n        return this.products.filter(product => product.category_id === this.selectedCategory);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Styles CSS simplifiés */\n.product-card,\n.product-card img {\n  border: 1px solid #ccc;\n  border-radius: 5px;\n}\n\n.product-card {\n  padding: 10px;\n  margin-bottom: 20px;\n}\n\n.product-card img {\n  max-width: 100%;\n  height: auto;\n}\n</style>\n"],"mappings":";;gEAIMA,mBAAA,CAAqC;EAA9BC,GAAG,EAAC;AAAM,GAAC,aAAW;gEAE3BD,mBAAA,CAAiD;EAAzCE,KAAK,EAAC;AAAW,GAAC,gBAAc;gEACxCF,mBAAA,CAAoD;EAA5CE,KAAK,EAAC;AAAY,GAAC,kBAAgB;oBAD3CC,UAAiD,EACjDC,UAAoD,C;gEAMtDJ,mBAAA,CAAqD;EAA9CC,GAAG,EAAC;AAAU,GAAC,yBAAuB;gEAE3CD,mBAAA,CAA+C;EAAvCE,KAAK,EAAC;AAAE,GAAC,uBAAqB;mBAf9C;mBAAA;;uBACEG,mBAAA,CA2BM,cA1BJC,mBAAA,oBAAuB,EACvBN,mBAAA,CAMM,cALJO,UAAqC,E,gBACrCP,mBAAA,CAGS;IARf,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKuBC,KAAA,CAAAC,MAAM,GAAAF,MAAA;IAAGG,QAAM,EAAAJ,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;KALrD,IAAAG,UAAA,2C,gBAKuBN,KAAA,CAAAC,MAAM,E,KAMzBL,mBAAA,yBAA4B,EAC5BN,mBAAA,CAMM,cALJiB,UAAqD,E,gBACrDjB,mBAAA,CAGS;IAjBf,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAcuBC,KAAA,CAAAQ,gBAAgB,GAAAT,MAAA;IAAGG,QAAM,EAAAJ,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;MACvDM,UAA+C,G,kBAC/Cd,mBAAA,CAA2Ge,SAAA,QAhBnHC,WAAA,CAgBmCX,KAAA,CAAAY,UAAU,EAAtBC,QAAQ;yBAAvBlB,mBAAA,CAA2G;MAAnEmB,GAAG,EAAED,QAAQ,CAACE,EAAE;MAAGvB,KAAK,EAAEqB,QAAQ,CAACE;wBAAOF,QAAQ,CAACG,IAAI,wBAhBvGC,UAAA;2FAcuBjB,KAAA,CAAAQ,gBAAgB,E,KAMnCZ,mBAAA,wBAA2B,G,kBAC3BD,mBAAA,CAMMe,SAAA,QA3BVC,WAAA,CAqB2BP,QAAA,CAAAc,gBAAgB,EAA3BC,OAAO;yBAAnBxB,mBAAA,CAMM;MANoCmB,GAAG,EAAEK,OAAO,CAACJ,EAAE;MAAEK,KAAK,EAAC;QAC/D9B,mBAAA,CAA2B,YAAA+B,gBAAA,CAApBF,OAAO,CAACH,IAAI,kBACnB1B,mBAAA,CAAgC,WAAA+B,gBAAA,CAA1BF,OAAO,CAACG,WAAW,kBACzBhC,mBAAA,CAA4B,WAAA+B,gBAAA,CAAtBF,OAAO,CAACI,KAAK,IAAG,IAAE,iBACxB3B,mBAAA,iCAAoC,EACzBuB,OAAO,CAACK,QAAQ,I,cAA3B7B,mBAAA,CAAyE;MA1B/EmB,GAAA;MA0BoCW,GAAG,EAAEN,OAAO,CAACK,QAAQ;MAAGE,GAAG,EAAEP,OAAO,CAACH;4BA1BzEW,UAAA,KAAA/B,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}