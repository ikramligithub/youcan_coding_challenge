{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4b3441ad\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"product-container\"\n};\nconst _hoisted_2 = {\n  class: \"sort-section\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"sort\"\n}, \"Sort by:\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"price_asc\"\n}, \"Price ascending\", -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"price_desc\"\n}, \"Price descending\", -1 /* HOISTED */));\nconst _hoisted_6 = [_hoisted_4, _hoisted_5];\nconst _hoisted_7 = {\n  class: \"filter-section\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"category\"\n}, \"Filter by category:\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"All categories\", -1 /* HOISTED */));\nconst _hoisted_10 = [\"value\"];\nconst _hoisted_11 = {\n  class: \"description\"\n};\nconst _hoisted_12 = {\n  class: \"price\"\n};\nconst _hoisted_13 = [\"src\", \"alt\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Sorting options \"), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.sortBy = $event),\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.fetchProducts && $options.fetchProducts(...args))\n  }, [..._hoisted_6], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.sortBy]])]), _createCommentVNode(\" Filtering options \"), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.selectedCategory = $event),\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.fetchProducts && $options.fetchProducts(...args))\n  }, [_hoisted_9, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, category => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: category.id,\n      value: category.id\n    }, _toDisplayString(category.name), 9 /* TEXT, PROPS */, _hoisted_10);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.selectedCategory]])]), _createCommentVNode(\" Product list \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredProducts, product => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: product.id,\n      class: \"product-card\"\n    }, [_createElementVNode(\"h2\", null, _toDisplayString(product.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, _toDisplayString(product.description), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_12, _toDisplayString(product.price) + \" €\", 1 /* TEXT */), _createCommentVNode(\" Display product image \"), product.imageUrl ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: product.imageUrl,\n      alt: product.name\n    }, null, 8 /* PROPS */, _hoisted_13)) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","value","_hoisted_4","_hoisted_5","_createElementBlock","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","_cache","$event","$data","sortBy","onChange","args","$options","fetchProducts","_hoisted_6","_hoisted_7","_hoisted_8","selectedCategory","_hoisted_9","_Fragment","_renderList","categories","category","key","id","name","_hoisted_10","filteredProducts","product","_toDisplayString","_hoisted_11","description","_hoisted_12","price","imageUrl","src","alt","_hoisted_13"],"sources":["C:\\Users\\IKRAM\\Coding_Cha\\app_codingchan\\src\\components\\ProductList.vue"],"sourcesContent":["<template>\n  <div class=\"product-container\">\n    <!-- Sorting options -->\n    <div class=\"sort-section\">\n      <label for=\"sort\">Sort by:</label>\n      <select v-model=\"sortBy\" @change=\"fetchProducts\">\n        <option value=\"price_asc\">Price ascending</option>\n        <option value=\"price_desc\">Price descending</option>\n      </select>\n    </div>\n    \n    <!-- Filtering options -->\n    <div class=\"filter-section\">\n      <label for=\"category\">Filter by category:</label>\n      <select v-model=\"selectedCategory\" @change=\"fetchProducts\">\n        <option value=\"\">All categories</option>\n        <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">{{ category.name }}</option>\n      </select>\n    </div>\n\n    <!-- Product list -->\n    <div v-for=\"product in filteredProducts\" :key=\"product.id\" class=\"product-card\">\n      <h2>{{ product.name }}</h2>\n      <p class=\"description\">{{ product.description }}</p>\n      <p class=\"price\">{{ product.price }} €</p>\n      <!-- Display product image -->\n      <img v-if=\"product.imageUrl\" :src=\"product.imageUrl\" :alt=\"product.name\">\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      categories: [],\n      sortBy: 'price_asc',\n      selectedCategory: '',\n    };\n  },\n  mounted() {\n    this.fetchProducts();\n    this.fetchCategories();\n  },\n  methods: {\n    fetchProducts() {\n      let url = 'http://127.0.0.1:8000/api/products';\n      // Ajouter des paramètres pour filtrer par catégorie\n      if (this.selectedCategory !== '') {\n        url += '?category=' + this.selectedCategory;\n      }\n      axios.get(url)\n        .then(response => {\n          // Tri des produits en fonction de sortBy\n          if (this.sortBy === 'price_asc') {\n            this.products = response.data.sort((a, b) => a.price - b.price);\n          } else if (this.sortBy === 'price_desc') {\n            this.products = response.data.sort((a, b) => b.price - a.price);\n          } else {\n            this.products = response.data;\n          }\n          // Mettre à jour l'URL de l'image pour chaque produit\n          this.products.forEach(product => {\n            product.imageUrl = this.getProductImageUrl(product.image);\n          });\n        })\n        .catch(error => {\n          console.error('Erreur lors de la récupération des produits :', error);\n        });\n    },\n    fetchCategories() {\n      // Récupérer la liste des catégories depuis le serveur\n      axios.get('http://127.0.0.1:8000/api/categories')\n        .then(response => {\n          this.categories = response.data;\n        })\n        .catch(error => {\n          console.error('Erreur lors de la récupération des catégories :', error);\n        });\n    },\n    getProductImageUrl(imagePath) {\n      // Construire l'URL complet de l'image à partir du chemin d'accès\n      return 'http://127.0.0.1:8000/api/products/' + imagePath;\n    }\n  },\n  computed: {\n    filteredProducts() {\n      // Appliquer le filtre de catégorie localement\n      if (this.selectedCategory === '') {\n        return this.products;\n      } else {\n        return this.products.filter(product => product.category_id === this.selectedCategory);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Styles CSS pour un design plus professionnel */\n.product-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.sort-section,\n.filter-section {\n  margin-bottom: 20px;\n}\n\n.product-card {\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n  width: 80%;\n  max-width: 600px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.product-card h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 1.5rem;\n}\n\n.description {\n  margin-bottom: 15px;\n}\n\n.price {\n  font-weight: bold;\n  font-size: 1.2rem;\n}\n\n.product-card img {\n  max-width: 100%;\n  height: auto;\n  border-radius: 5px;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAmB;;EAEvBA,KAAK,EAAC;AAAc;gEACvBC,mBAAA,CAAkC;EAA3BC,GAAG,EAAC;AAAM,GAAC,UAAQ;gEAExBD,mBAAA,CAAkD;EAA1CE,KAAK,EAAC;AAAW,GAAC,iBAAe;gEACzCF,mBAAA,CAAoD;EAA5CE,KAAK,EAAC;AAAY,GAAC,kBAAgB;oBAD3CC,UAAkD,EAClDC,UAAoD,C;;EAKnDL,KAAK,EAAC;AAAgB;gEACzBC,mBAAA,CAAiD;EAA1CC,GAAG,EAAC;AAAU,GAAC,qBAAmB;gEAEvCD,mBAAA,CAAwC;EAAhCE,KAAK,EAAC;AAAE,GAAC,gBAAc;oBAfvC;;EAuBSH,KAAK,EAAC;AAAa;;EACnBA,KAAK,EAAC;AAAO;oBAxBtB;;uBACEM,mBAAA,CA2BM,OA3BNC,UA2BM,GA1BJC,mBAAA,qBAAwB,EACxBP,mBAAA,CAMM,OANNQ,UAMM,GALJC,UAAkC,E,gBAClCT,mBAAA,CAGS;IARf,uBAAAU,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKuBC,KAAA,CAAAC,MAAM,GAAAF,MAAA;IAAGG,QAAM,EAAAJ,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;KALrD,IAAAG,UAAA,2C,gBAKuBN,KAAA,CAAAC,MAAM,E,KAMzBN,mBAAA,uBAA0B,EAC1BP,mBAAA,CAMM,OANNmB,UAMM,GALJC,UAAiD,E,gBACjDpB,mBAAA,CAGS;IAjBf,uBAAAU,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAcuBC,KAAA,CAAAS,gBAAgB,GAAAV,MAAA;IAAGG,QAAM,EAAAJ,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;MACvDO,UAAwC,G,kBACxCjB,mBAAA,CAA2GkB,SAAA,QAhBnHC,WAAA,CAgBmCZ,KAAA,CAAAa,UAAU,EAAtBC,QAAQ;yBAAvBrB,mBAAA,CAA2G;MAAnEsB,GAAG,EAAED,QAAQ,CAACE,EAAE;MAAG1B,KAAK,EAAEwB,QAAQ,CAACE;wBAAOF,QAAQ,CAACG,IAAI,wBAhBvGC,WAAA;2FAcuBlB,KAAA,CAAAS,gBAAgB,E,KAMnCd,mBAAA,kBAAqB,G,kBACrBF,mBAAA,CAMMkB,SAAA,QA3BVC,WAAA,CAqB2BR,QAAA,CAAAe,gBAAgB,EAA3BC,OAAO;yBAAnB3B,mBAAA,CAMM;MANoCsB,GAAG,EAAEK,OAAO,CAACJ,EAAE;MAAE7B,KAAK,EAAC;QAC/DC,mBAAA,CAA2B,YAAAiC,gBAAA,CAApBD,OAAO,CAACH,IAAI,kBACnB7B,mBAAA,CAAoD,KAApDkC,WAAoD,EAAAD,gBAAA,CAA1BD,OAAO,CAACG,WAAW,kBAC7CnC,mBAAA,CAA0C,KAA1CoC,WAA0C,EAAAH,gBAAA,CAAtBD,OAAO,CAACK,KAAK,IAAG,IAAE,iBACtC9B,mBAAA,2BAA8B,EACnByB,OAAO,CAACM,QAAQ,I,cAA3BjC,mBAAA,CAAyE;MA1B/EsB,GAAA;MA0BoCY,GAAG,EAAEP,OAAO,CAACM,QAAQ;MAAGE,GAAG,EAAER,OAAO,CAACH;4BA1BzEY,WAAA,KAAAlC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}