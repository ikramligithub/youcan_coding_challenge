{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      products: [],\n      categories: [],\n      sortBy: 'price_asc',\n      selectedCategory: ''\n    };\n  },\n  mounted() {\n    this.fetchProducts();\n    this.fetchCategories();\n  },\n  methods: {\n    fetchProducts() {\n      let url = 'http://127.0.0.1:8000/api/products';\n      // Ajouter des paramètres pour trier les produits\n      url += '?sort=' + this.sortBy;\n      // Ajouter des paramètres pour filtrer par catégorie\n      if (this.selectedCategory !== '') {\n        url += '&category=' + this.selectedCategory;\n      }\n      axios.get(url).then(response => {\n        this.products = response.data;\n      }).catch(error => {\n        console.error('Erreur lors de la récupération des produits :', error);\n      });\n    },\n    fetchCategories() {\n      // Récupérer la liste des catégories depuis le serveur\n      axios.get('http://127.0.0.1:8000/api/categories').then(response => {\n        this.categories = response.data;\n      }).catch(error => {\n        console.error('Erreur lors de la récupération des catégories :', error);\n      });\n    },\n    sortProducts() {\n      this.fetchProducts();\n    },\n    filterProducts() {\n      this.fetchProducts();\n    },\n    getProductImageUrl(imagePath) {\n      // Construire l'URL complet de l'image à partir du chemin d'accès\n      return 'http://127.0.0.1:8000/api/products/' + imagePath;\n    }\n  },\n  computed: {\n    filteredProducts() {\n      // Appliquer le filtre de catégorie localement\n      if (this.selectedCategory === '') {\n        return this.products;\n      } else {\n        return this.products.filter(product => product.category_id === this.selectedCategory);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","products","categories","sortBy","selectedCategory","mounted","fetchProducts","fetchCategories","methods","url","get","then","response","catch","error","console","sortProducts","filterProducts","getProductImageUrl","imagePath","computed","filteredProducts","filter","product","category_id"],"sources":["C:\\Users\\IKRAM\\Coding_Cha\\app_codingchan\\src\\components\\ProductList.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- Options de tri -->\n    <div>\n      <label for=\"sort\">Trier par :</label>\n      <select v-model=\"sortBy\" @change=\"sortProducts\">\n        <option value=\"price_asc\">Prix croissant</option>\n        <option value=\"price_desc\">Prix décroissant</option>\n      </select>\n    </div>\n    \n    <!-- Options de filtrage -->\n    <div>\n      <label for=\"category\">Filtrer par catégorie :</label>\n      <select v-model=\"selectedCategory\" @change=\"filterProducts\">\n        <option value=\"\">Toutes les catégories</option>\n        <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">{{ category.name }}</option>\n      </select>\n    </div>\n\n    <!-- Liste des produits -->\n    <div v-for=\"product in filteredProducts\" :key=\"product.id\" class=\"product-card\">\n      <h2>{{ product.name }}</h2>\n      <p>{{ product.description }}</p>\n      <p>{{ product.price }} €</p>\n      <img :src=\"getProductImageUrl(product.image)\" alt=\"Product Image\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      categories: [],\n      sortBy: 'price_asc',\n      selectedCategory: '',\n    };\n  },\n  mounted() {\n    this.fetchProducts();\n    this.fetchCategories();\n  },\n  methods: {\n    fetchProducts() {\n      let url = 'http://127.0.0.1:8000/api/products';\n      // Ajouter des paramètres pour trier les produits\n      url += '?sort=' + this.sortBy;\n      // Ajouter des paramètres pour filtrer par catégorie\n      if (this.selectedCategory !== '') {\n        url += '&category=' + this.selectedCategory;\n      }\n      axios.get(url)\n        .then(response => {\n          this.products = response.data;\n        })\n        .catch(error => {\n          console.error('Erreur lors de la récupération des produits :', error);\n        });\n    },\n    fetchCategories() {\n      // Récupérer la liste des catégories depuis le serveur\n      axios.get('http://127.0.0.1:8000/api/categories')\n        .then(response => {\n          this.categories = response.data;\n        })\n        .catch(error => {\n          console.error('Erreur lors de la récupération des catégories :', error);\n        });\n    },\n    sortProducts() {\n      this.fetchProducts();\n    },\n    filterProducts() {\n      this.fetchProducts();\n    },\n    getProductImageUrl(imagePath) {\n      // Construire l'URL complet de l'image à partir du chemin d'accès\n      return 'http://127.0.0.1:8000/api/products/' + imagePath;\n    }\n  },\n  computed: {\n    filteredProducts() {\n      // Appliquer le filtre de catégorie localement\n      if (this.selectedCategory === '') {\n        return this.products;\n      } else {\n        return this.products.filter(product => product.category_id === this.selectedCategory);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Styles CSS */\n.product-card {\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  padding: 10px;\n  margin-bottom: 20px;\n}\n\n.product-card img {\n  max-width: 100%;\n  height: auto;\n}\n</style>\n"],"mappings":"AA+BA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,EAAE;MACdC,MAAM,EAAE,WAAW;MACnBC,gBAAgB,EAAE;IACpB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC,CAAC;IACpB,IAAI,CAACC,eAAe,CAAC,CAAC;EACxB,CAAC;EACDC,OAAO,EAAE;IACPF,aAAaA,CAAA,EAAG;MACd,IAAIG,GAAE,GAAI,oCAAoC;MAC9C;MACAA,GAAE,IAAK,QAAO,GAAI,IAAI,CAACN,MAAM;MAC7B;MACA,IAAI,IAAI,CAACC,gBAAe,KAAM,EAAE,EAAE;QAChCK,GAAE,IAAK,YAAW,GAAI,IAAI,CAACL,gBAAgB;MAC7C;MACAL,KAAK,CAACW,GAAG,CAACD,GAAG,EACVE,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACX,QAAO,GAAIW,QAAQ,CAACZ,IAAI;MAC/B,CAAC,EACAa,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,+CAA+C,EAAEA,KAAK,CAAC;MACvE,CAAC,CAAC;IACN,CAAC;IACDP,eAAeA,CAAA,EAAG;MAChB;MACAR,KAAK,CAACW,GAAG,CAAC,sCAAsC,EAC7CC,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACV,UAAS,GAAIU,QAAQ,CAACZ,IAAI;MACjC,CAAC,EACAa,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,iDAAiD,EAAEA,KAAK,CAAC;MACzE,CAAC,CAAC;IACN,CAAC;IACDE,YAAYA,CAAA,EAAG;MACb,IAAI,CAACV,aAAa,CAAC,CAAC;IACtB,CAAC;IACDW,cAAcA,CAAA,EAAG;MACf,IAAI,CAACX,aAAa,CAAC,CAAC;IACtB,CAAC;IACDY,kBAAkBA,CAACC,SAAS,EAAE;MAC5B;MACA,OAAO,qCAAoC,GAAIA,SAAS;IAC1D;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,gBAAgBA,CAAA,EAAG;MACjB;MACA,IAAI,IAAI,CAACjB,gBAAe,KAAM,EAAE,EAAE;QAChC,OAAO,IAAI,CAACH,QAAQ;MACtB,OAAO;QACL,OAAO,IAAI,CAACA,QAAQ,CAACqB,MAAM,CAACC,OAAM,IAAKA,OAAO,CAACC,WAAU,KAAM,IAAI,CAACpB,gBAAgB,CAAC;MACvF;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}